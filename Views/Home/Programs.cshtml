@model IEnumerable<PassItOnAcademy.Controllers.ProgramCardVM>
@{
    ViewData["Title"] = "Programs & Prices";
}

@section FullWidthTop {
    <style>
        /* --- Local styles for glass chips (inspired by your snippet) --- */
        .card {
            transition: box-shadow .35s ease, transform .35s ease;
        }

            .card:hover {
                box-shadow: 0 20px 40px -20px rgba(0,0,0,.35);
                transform: translateY(-2px);
            }

        .glass-chip {
            position: absolute;
            display: inline-flex;
            align-items: center;
            gap: .5rem;
            height: 40px;
            padding: 0 .75rem;
            color: #fff;
            background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.06));
            border: 1px solid rgba(255,255,255,.18);
            box-shadow: 0 18px 28px rgba(0,0,0,.25);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 10px; /* only the chips are rounded */
            transform: rotate(var(--r, 0deg));
            margin: 0 -28px; /* “fanned” look like Uiverse */
            opacity: .95;
            transition: transform .5s ease, margin .5s ease, opacity .35s ease;
            pointer-events: none; /* never block clicks */
        }

        .card:hover .glass-chip {
            transform: rotate(0deg);
            margin: 0 8px;
            opacity: 1;
        }

        /* Small helper for a subtle top vignette over images */
        .top-fade {
            background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,0));
        }
    </style>
}

<section class="space-y-10">
    <header class="text-center">
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Programs & Prices</h1>
        <p class="mt-2 text-zinc-600">Position-specific coaching built for real match demands.</p>
    </header>

    <!-- Program grid -->
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
        @foreach (var p in Model)
        {
            <article class="card relative border border-zinc-200 bg-white shadow-sm">
                <!-- Media well: full image, never cropped -->
                <div class="relative h-72 w-full bg-zinc-100 grid place-items-center">
                    <img src="@p.ImageUrl" alt="@p.Title" class="max-h-full max-w-full object-contain" />
                    <div class="pointer-events-none absolute inset-x-0 top-0 h-12 top-fade"></div>

                    <!-- Rotating glass chips (inspired by your example) -->
                    <span class="glass-chip left-6 top-6" style="--r:-18deg">
                        <span class="inline-block text-[11px] font-bold bg-black/80 px-2 py-0.5 rounded"> @p.Tag </span>
                        <span class="text-[12px] opacity-80">60–75 min</span>
                    </span>
                    <span class="glass-chip right-6 top-6" style="--r:8deg">
                        <span class="text-[12px]">R @p.Price.ToString("0")</span>
                    </span>
                    <span class="glass-chip left-1/2 -translate-x-1/2 bottom-6" style="--r:22deg">
                        <span class="text-[12px] font-semibold">@p.Title</span>
                    </span>
                </div>

                <!-- Info band (clear, readable, not on the image) -->
                <div class="p-5">
                    <h2 class="text-lg font-bold leading-snug text-zinc-900">@p.Title</h2>
                    <p class="mt-1 text-sm text-zinc-600">@p.Blurb</p>
                </div>

                <!-- Price + actions (fixed placement) -->
                <div class="border-t border-zinc-200 p-5">
                    <div class="flex items-end justify-between">
                        <div>
                            <div class="text-2xl font-extrabold">R @p.Price.ToString("0")</div>
                            <div class="text-xs text-zinc-500">per 1:1 session</div>
                        </div>
                        <div class="flex gap-2">
                            <a asp-controller="Schedule" asp-action="Index"
                               class="border border-zinc-300 px-3 py-2 text-sm font-semibold hover:bg-zinc-50">View schedule</a>
                            <a asp-controller="Schedule" asp-action="Index" asp-route-autoselect="@p.Title"
                               class="bg-[#FFD200] px-3 py-2 text-sm font-semibold text-black hover:brightness-95">Book now</a>
                        </div>
                    </div>
                </div>

                <!-- Slim accent bar on hover -->
                <div class="pointer-events-none absolute inset-x-0 bottom-0 h-0.5 bg-gradient-to-r from-emerald-400 via-cyan-400 to-amber-400 opacity-0 transition-opacity duration-300 card:hover:opacity-100"></div>
            </article>
        }
    </div>

    <!-- Packages -->
    <section class="border border-zinc-200 bg-white p-6 shadow-sm">
        <h3 class="text-xl font-bold mb-4">Packages (save on multi-session)</h3>
        <div class="grid sm:grid-cols-3 gap-4">
            <div class="border border-zinc-200 p-4">
                <div class="text-sm font-semibold">Single session</div>
                <div class="mt-1 text-2xl font-extrabold">R 650</div>
                <div class="mt-2 text-sm text-zinc-600">Good for a tune-up or trial.</div>
            </div>
            <div class="border-2 border-black p-4">
                <div class="text-sm font-semibold">4-pack</div>
                <div class="mt-1 text-2xl font-extrabold">R 2 400</div>
                <div class="mt-2 text-sm text-zinc-600">Save R 200. Skill block with progression.</div>
            </div>
            <div class="border border-zinc-200 p-4">
                <div class="text-sm font-semibold">8-pack</div>
                <div class="mt-1 text-2xl font-extrabold">R 4 600</div>
                <div class="mt-2 text-sm text-zinc-600">Save R 600. Full development cycle.</div>
            </div>
        </div>
        <div class="mt-4 text-xs text-zinc-500">Packs can be shared within the same family; valid 6 months.</div>
    </section>

    <!-- What’s included -->
    <section class="grid md:grid-cols-3 gap-6">
        <div class="border border-zinc-200 bg-white p-6 shadow-sm">
            <h4 class="font-bold">What you get</h4>
            <ul class="mt-2 space-y-1 text-sm text-zinc-600 list-disc pl-5">
                <li>1:1 or small-group coaching (max 4)</li>
                <li>Position-specific drills + decision making</li>
                <li>Video cues and at-home progressions</li>
                <li>Session notes inside your account</li>
            </ul>
        </div>
        <div class="border border-zinc-200 bg-white p-6 shadow-sm">
            <h4 class="font-bold">Who it suits</h4>
            <ul class="mt-2 space-y-1 text-sm text-zinc-600 list-disc pl-5">
                <li>U13–Senior | Club & School players</li>
                <li>Beginners to advanced (we adapt load)</li>
                <li>Backs, forwards, kickers, and hybrids</li>
            </ul>
        </div>
        <div class="border border-zinc-200 bg-white p-6 shadow-sm">
            <h4 class="font-bold">Policies</h4>
            <ul class="mt-2 space-y-1 text-sm text-zinc-600 list-disc pl-5">
                <li>24h cancellation window (after that, charged)</li>
                <li>Weather: we adapt session or reschedule</li>
                <li>Pay online via PayFast or cash at the session</li>
            </ul>
        </div>
    </section>

    <div class="text-center">
        <a asp-controller="Schedule" asp-action="Index"
           class="inline-flex items-center bg-[#FFD200] px-6 py-3 text-sm font-semibold text-black hover:brightness-95">
            View Schedule & Book
        </a>
    </div>
</section>
